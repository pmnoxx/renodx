// ---- Created with 3Dmigoto v1.4.1 on Sat Jun 28 02:45:38 2025

cbuffer _Globals : register(b0)
{
  float4 ambLit : packoffset(c0);
  row_major float4x4 mW2S[4] : packoffset(c1);
  float4 vSMOf[4] : packoffset(c17);
  float4 vS2VZ : packoffset(c21);
  float4 vSMDF : packoffset(c22);
  float4 scSMD[4] : packoffset(c23);
  float4 scSM2D[4] : packoffset(c27);
  float4 sdplane : packoffset(c31);
  row_major float4x4 mTrsW2LPV[4] : packoffset(c32);
  row_major float4x4 mTrsW2LPVSR[4] : packoffset(c48);
  int nLPV3DDepth : packoffset(c64);
  float fDiffuseScale : packoffset(c64.y);
  float fNormalDir : packoffset(c64.z);
  int nNumCascadeLevels : packoffset(c64.w);
  float4 fSHBlendRegion : packoffset(c65);
  float3 vAmdLerpParam : packoffset(c66);
  float4 vAmbParam : packoffset(c67);
  float4 vAmbDifScl : packoffset(c68);
  row_major float4x4 mV2W : packoffset(c69);
  row_major float4x4 mP2W : packoffset(c73);
}

SamplerState __smpsShadow_s : register(s0);
SamplerState __smpsShadow2_s : register(s1);
SamplerState __smpsShadow3_s : register(s2);
SamplerState __smpsShadow4_s : register(s3);
SamplerState __smpsLPVBuffer_s : register(s4);
SamplerState __smpsDepth_s : register(s5);
SamplerState __smpsGBuf0_s : register(s6);
SamplerState __smpsAmbDif_s : register(s8);
Texture2D<float4> sShadow : register(t0);
Texture2D<float4> sShadow2 : register(t1);
Texture2D<float4> sShadow3 : register(t2);
Texture2D<float4> sShadow4 : register(t3);
Texture2DArray<float4> sLPVBuffer : register(t4);
Texture2D<float4> sDepth : register(t5);
Texture2D<float4> sGBuf0 : register(t6);
TextureCube<float4> sAmbDif : register(t8);


// 3Dmigoto declarations
#define cmp -


void main(
  float4 v0 : SV_Position0,
  float4 v1 : TEXCOORD0,
  out float4 o0 : SV_Target0)
{
  float4 r0,r1,r2,r3,r4,r5,r6,r7,r8,r9,r10,r11,r12,r13;
  uint4 bitmask, uiDest;
  float4 fDest;

  r0.xy = v1.xy * float2(0.5,-0.5) + float2(0.5,0.5);
  r0.z = sDepth.Sample(__smpsDepth_s, r0.xy).x;
  r0.w = cmp(r0.z == 1.000000);
  if (r0.w != 0) discard;
  r1.xyzw = mP2W._m10_m11_m12_m13 * v1.yyyy;
  r1.xyzw = v1.xxxx * mP2W._m00_m01_m02_m03 + r1.xyzw;
  r1.xyzw = r0.zzzz * mP2W._m20_m21_m22_m23 + r1.xyzw;
  r1.xyzw = mP2W._m30_m31_m32_m33 + r1.xyzw;
  r1.xyzw = r1.xyzw / r1.wwww;
  r0.xy = sGBuf0.Sample(__smpsGBuf0_s, r0.xy).xy;
  r0.xy = r0.xy * float2(2,2) + float2(-1,-1);
  r2.xyz = float3(1,1,1) + -abs(r0.xyx);
  r3.z = r2.x + -abs(r0.y);
  r0.z = cmp(r3.z >= 0);
  r2.xw = cmp(r0.xy >= float2(0,0));
  r2.xw = r2.xw ? float2(1,1) : float2(-1,-1);
  r2.xy = r2.yz * r2.xw;
  r3.xy = r0.zz ? r0.xy : r2.xy;
  r0.x = dot(r3.xyz, r3.xyz);
  r0.x = rsqrt(r0.x);
  r0.xyz = r3.xyz * r0.xxx;
  r2.xyz = mV2W._m10_m11_m12 * r0.yyy;
  r0.xyw = r0.xxx * mV2W._m00_m01_m02 + r2.xyz;
  r0.xyz = r0.zzz * mV2W._m20_m21_m22 + r0.xyw;
  r2.xyzw = mW2S[0]._m10_m11_m12_m13 * r1.yyyy;
  r2.xyzw = r1.xxxx * mW2S[0]._m00_m01_m02_m03 + r2.xyzw;
  r2.xyzw = r1.zzzz * mW2S[0]._m20_m21_m22_m23 + r2.xyzw;
  r2.xyzw = r1.wwww * mW2S[0]._m30_m31_m32_m33 + r2.xyzw;
  r3.xyz = mW2S[1]._m10_m11_m12 * r1.yyy;
  r3.xyz = r1.xxx * mW2S[1]._m00_m01_m02 + r3.xyz;
  r3.xyz = r1.zzz * mW2S[1]._m20_m21_m22 + r3.xyz;
  r3.xyz = r1.www * mW2S[1]._m30_m31_m32 + r3.xyz;
  r4.xyz = mW2S[2]._m10_m11_m12 * r1.yyy;
  r4.xyz = r1.xxx * mW2S[2]._m00_m01_m02 + r4.xyz;
  r4.xyz = r1.zzz * mW2S[2]._m20_m21_m22 + r4.xyz;
  r4.xyz = r1.www * mW2S[2]._m30_m31_m32 + r4.xyz;
  r5.xyz = mW2S[3]._m10_m11_m12 * r1.yyy;
  r5.xyz = r1.xxx * mW2S[3]._m00_m01_m02 + r5.xyz;
  r5.xyz = r1.zzz * mW2S[3]._m20_m21_m22 + r5.xyz;
  r5.xyz = r1.www * mW2S[3]._m30_m31_m32 + r5.xyz;
  r0.w = dot(r2.xyzw, vS2VZ.xyzw);
  r3.w = cmp(0 < r0.w);
 // r3.w = 0.f; // showshadows far and close override
  r3.xyz = r3.www ? r3.xyz : r2.xyz;
  r6.xyzw = r3.wwww ? vSMOf[1].xyzw : vSMOf[0].xyzw;
  r7.xyzw = r3.wwww ? scSMD[1].xyzw : scSMD[0].xyzw;
  r8.xy = r3.ww ? scSM2D[1].xy : scSM2D[0].xy;
  r3.w = r3.w ? 1.000000 : 0;
  r8.zw = -vSMDF.xy + r0.ww;
  r8.zw = cmp(float2(0,0) < r8.zw);
  r3.xyz = r8.zzz ? r4.xyz : r3.xyz;
  r4.xyzw = r8.zzzz ? vSMOf[2].xyzw : r6.xyzw;
  r3.xyz = r8.www ? r5.zxy : r3.zxy;
  r4.xyzw = r8.wwww ? vSMOf[3].xyzw : r4.xyzw;
  r5.xyzw = r8.zzzz ? scSMD[2].xyzw : r7.xyzw;
  r6.xy = r8.zz ? scSM2D[2].xy : r8.xy;
  r0.w = r8.z ? 2 : r3.w;
  r5.xyzw = r8.wwww ? scSMD[3].xyzw : r5.xyzw;
  r6.xy = r8.ww ? scSM2D[3].xy : r6.xy;
  r0.w = r8.w ? 3 : r0.w;
  r3.w = cmp(r0.w == 0.000000);
  if (r3.w != 0) {
    r7.xw = r6.xy + r3.yz;
    r3.x = saturate(r3.x);
    r6.zw = r7.xw * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r8.zw = -r6.zw * r5.xy + r7.xw;
    r8.xy = r8.zw + r5.xy;
    r9.xyzw = saturate(r8.zwxw);
    r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
    r10.x = sShadow.SampleLevel(__smpsShadow_s, r9.xy, 0).x;
    r10.w = sShadow.SampleLevel(__smpsShadow_s, r9.zw, 0).x;
    r8.xyzw = saturate(r8.zyxy);
    r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
    r10.y = sShadow.SampleLevel(__smpsShadow_s, r8.xy, 0).x;
    r10.z = sShadow.SampleLevel(__smpsShadow_s, r8.zw, 0).x;
    r8.xyzw = cmp(r10.xyzw < r3.xxxx);
    r9.xyzw = r8.xyzw ? float4(1,1,1,1) : 0;
    r8.xy = r8.xy ? float2(-1,-1) : float2(-0,-0);
    r8.xy = r9.wz + r8.xy;
    r8.xy = r6.zz * r8.xy + r9.xy;
    r3.w = r8.y + -r8.x;
    r3.w = r6.w * r3.w + r8.x;
    r7.yz = r7.wx + r5.yx;
    r6.zw = r7.zw * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r8.zw = -r6.zw * r5.xy + r7.zw;
    r8.xy = r8.zw + r5.xy;
    r9.xyzw = saturate(r8.zwxw);
    r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
    r10.x = sShadow.SampleLevel(__smpsShadow_s, r9.xy, 0).x;
    r10.w = sShadow.SampleLevel(__smpsShadow_s, r9.zw, 0).x;
    r8.xyzw = saturate(r8.zyxy);
    r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
    r10.y = sShadow.SampleLevel(__smpsShadow_s, r8.xy, 0).x;
    r10.z = sShadow.SampleLevel(__smpsShadow_s, r8.zw, 0).x;
    r8.xyzw = cmp(r10.xyzw < r3.xxxx);
    r9.xyzw = r8.xyzw ? float4(1,1,1,1) : 0;
    r8.xy = r8.xy ? float2(-1,-1) : float2(-0,-0);
    r8.xy = r9.wz + r8.xy;
    r8.xy = r6.zz * r8.xy + r9.xy;
    r6.z = r8.y + -r8.x;
    r6.z = r6.w * r6.z + r8.x;
    r3.w = r6.z + r3.w;
    r8.xw = r7.yz + r5.yx;
    r8.yz = r7.wy;
    r6.zw = r8.wy * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r9.zw = -r6.zw * r5.xy + r8.wy;
    r9.xy = r9.zw + r5.xy;
    r10.xyzw = saturate(r9.zwxw);
    r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
    r11.x = sShadow.SampleLevel(__smpsShadow_s, r10.xy, 0).x;
    r11.w = sShadow.SampleLevel(__smpsShadow_s, r10.zw, 0).x;
    r9.xyzw = saturate(r9.zyxy);
    r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
    r11.y = sShadow.SampleLevel(__smpsShadow_s, r9.xy, 0).x;
    r11.z = sShadow.SampleLevel(__smpsShadow_s, r9.zw, 0).x;
    r9.xyzw = cmp(r11.xyzw < r3.xxxx);
    r10.xyzw = r9.xyzw ? float4(1,1,1,1) : 0;
    r9.xy = r9.xy ? float2(-1,-1) : float2(-0,-0);
    r9.xy = r10.wz + r9.xy;
    r9.xy = r6.zz * r9.xy + r10.xy;
    r6.z = r9.y + -r9.x;
    r6.z = r6.w * r6.z + r9.x;
    r3.w = r6.z + r3.w;
    r9.xy = r8.wx + r5.xy;
    r9.zw = r8.yz;
    r6.zw = r9.xz * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r10.zw = -r6.zw * r5.xy + r9.xz;
    r10.xy = r10.zw + r5.xy;
    r11.xyzw = saturate(r10.zwxw);
    r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
    r12.x = sShadow.SampleLevel(__smpsShadow_s, r11.xy, 0).x;
    r12.w = sShadow.SampleLevel(__smpsShadow_s, r11.zw, 0).x;
    r10.xyzw = saturate(r10.zyxy);
    r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
    r12.y = sShadow.SampleLevel(__smpsShadow_s, r10.xy, 0).x;
    r12.z = sShadow.SampleLevel(__smpsShadow_s, r10.zw, 0).x;
    r10.xyzw = cmp(r12.xyzw < r3.xxxx);
    r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
    r10.xy = r10.xy ? float2(-1,-1) : float2(-0,-0);
    r10.xy = r11.wz + r10.xy;
    r10.xy = r6.zz * r10.xy + r11.xy;
    r6.z = r10.y + -r10.x;
    r6.z = r6.w * r6.z + r10.x;
    r3.w = r6.z + r3.w;
    r6.zw = r7.xy * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r10.zw = -r6.zw * r5.xy + r7.xy;
    r10.xy = r10.zw + r5.xy;
    r11.xyzw = saturate(r10.zwxw);
    r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
    r12.x = sShadow.SampleLevel(__smpsShadow_s, r11.xy, 0).x;
    r12.w = sShadow.SampleLevel(__smpsShadow_s, r11.zw, 0).x;
    r10.xyzw = saturate(r10.zyxy);
    r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
    r12.y = sShadow.SampleLevel(__smpsShadow_s, r10.xy, 0).x;
    r12.z = sShadow.SampleLevel(__smpsShadow_s, r10.zw, 0).x;
    r10.xyzw = cmp(r12.xyzw < r3.xxxx);
    r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
    r10.xy = r10.xy ? float2(-1,-1) : float2(-0,-0);
    r10.xy = r11.wz + r10.xy;
    r10.xy = r6.zz * r10.xy + r11.xy;
    r6.z = r10.y + -r10.x;
    r6.z = r6.w * r6.z + r10.x;
    r3.w = r6.z + r3.w;
    r6.zw = r7.zy * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r10.zw = -r6.zw * r5.xy + r7.zy;
    r10.xy = r10.zw + r5.xy;
    r11.xyzw = saturate(r10.zwxw);
    r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
    r12.x = sShadow.SampleLevel(__smpsShadow_s, r11.xy, 0).x;
    r12.w = sShadow.SampleLevel(__smpsShadow_s, r11.zw, 0).x;
    r10.xyzw = saturate(r10.zyxy);
    r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
    r12.y = sShadow.SampleLevel(__smpsShadow_s, r10.xy, 0).x;
    r12.z = sShadow.SampleLevel(__smpsShadow_s, r10.zw, 0).x;
    r10.xyzw = cmp(r12.xyzw < r3.xxxx);
    r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
    r10.xy = r10.xy ? float2(-1,-1) : float2(-0,-0);
    r10.xy = r11.wz + r10.xy;
    r10.xy = r6.zz * r10.xy + r11.xy;
    r6.z = r10.y + -r10.x;
    r6.z = r6.w * r6.z + r10.x;
    r3.w = r6.z + r3.w;
    r6.zw = r8.wz * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r10.zw = -r6.zw * r5.xy + r8.wz;
    r10.xy = r10.zw + r5.xy;
    r11.xyzw = saturate(r10.zwxw);
    r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
    r12.x = sShadow.SampleLevel(__smpsShadow_s, r11.xy, 0).x;
    r12.w = sShadow.SampleLevel(__smpsShadow_s, r11.zw, 0).x;
    r10.xyzw = saturate(r10.zyxy);
    r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
    r12.y = sShadow.SampleLevel(__smpsShadow_s, r10.xy, 0).x;
    r12.z = sShadow.SampleLevel(__smpsShadow_s, r10.zw, 0).x;
    r10.xyzw = cmp(r12.xyzw < r3.xxxx);
    r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
    r10.xy = r10.xy ? float2(-1,-1) : float2(-0,-0);
    r10.xy = r11.wz + r10.xy;
    r10.xy = r6.zz * r10.xy + r11.xy;
    r6.z = r10.y + -r10.x;
    r6.z = r6.w * r6.z + r10.x;
    r3.w = r6.z + r3.w;
    r6.zw = r9.xw * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r10.zw = -r6.zw * r5.xy + r9.xw;
    r10.xy = r10.zw + r5.xy;
    r11.xyzw = saturate(r10.zwxw);
    r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
    r12.x = sShadow.SampleLevel(__smpsShadow_s, r11.xy, 0).x;
    r12.w = sShadow.SampleLevel(__smpsShadow_s, r11.zw, 0).x;
    r10.xyzw = saturate(r10.zyxy);
    r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
    r12.y = sShadow.SampleLevel(__smpsShadow_s, r10.xy, 0).x;
    r12.z = sShadow.SampleLevel(__smpsShadow_s, r10.zw, 0).x;
    r10.xyzw = cmp(r12.xyzw < r3.xxxx);
    r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
    r9.zw = r10.xy ? float2(-1,-1) : float2(-0,-0);
    r9.zw = r11.wz + r9.zw;
    r9.zw = r6.zz * r9.zw + r11.xy;
    r6.z = r9.w + -r9.z;
    r6.z = r6.w * r6.z + r9.z;
    r3.w = r6.z + r3.w;
    r7.y = r8.x;
    r6.zw = r7.xy * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r10.zw = -r6.zw * r5.xy + r7.xy;
    r10.xy = r10.zw + r5.xy;
    r11.xyzw = saturate(r10.zwxw);
    r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
    r12.x = sShadow.SampleLevel(__smpsShadow_s, r11.xy, 0).x;
    r12.w = sShadow.SampleLevel(__smpsShadow_s, r11.zw, 0).x;
    r10.xyzw = saturate(r10.zyxy);
    r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
    r12.y = sShadow.SampleLevel(__smpsShadow_s, r10.xy, 0).x;
    r12.z = sShadow.SampleLevel(__smpsShadow_s, r10.zw, 0).x;
    r10.xyzw = cmp(r12.xyzw < r3.xxxx);
    r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
    r9.zw = r10.xy ? float2(-1,-1) : float2(-0,-0);
    r9.zw = r11.wz + r9.zw;
    r9.zw = r6.zz * r9.zw + r11.xy;
    r6.z = r9.w + -r9.z;
    r6.z = r6.w * r6.z + r9.z;
    r3.w = r6.z + r3.w;
    r6.zw = r7.zy * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r10.zw = -r6.zw * r5.xy + r7.zy;
    r10.xy = r10.zw + r5.xy;
    r11.xyzw = saturate(r10.zwxw);
    r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
    r12.x = sShadow.SampleLevel(__smpsShadow_s, r11.xy, 0).x;
    r12.w = sShadow.SampleLevel(__smpsShadow_s, r11.zw, 0).x;
    r10.xyzw = saturate(r10.zyxy);
    r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
    r12.y = sShadow.SampleLevel(__smpsShadow_s, r10.xy, 0).x;
    r12.z = sShadow.SampleLevel(__smpsShadow_s, r10.zw, 0).x;
    r10.xyzw = cmp(r12.xyzw < r3.xxxx);
    r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
    r9.zw = r10.xy ? float2(-1,-1) : float2(-0,-0);
    r9.zw = r11.wz + r9.zw;
    r9.zw = r6.zz * r9.zw + r11.xy;
    r6.z = r9.w + -r9.z;
    r6.z = r6.w * r6.z + r9.z;
    r3.w = r6.z + r3.w;
    r6.zw = r8.wx * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r10.zw = -r6.zw * r5.xy + r8.wx;
    r10.xy = r10.zw + r5.xy;
    r11.xyzw = saturate(r10.zwxw);
    r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
    r12.x = sShadow.SampleLevel(__smpsShadow_s, r11.xy, 0).x;
    r12.w = sShadow.SampleLevel(__smpsShadow_s, r11.zw, 0).x;
    r10.xyzw = saturate(r10.zyxy);
    r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
    r12.y = sShadow.SampleLevel(__smpsShadow_s, r10.xy, 0).x;
    r12.z = sShadow.SampleLevel(__smpsShadow_s, r10.zw, 0).x;
    r10.xyzw = cmp(r12.xyzw < r3.xxxx);
    r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
    r9.zw = r10.xy ? float2(-1,-1) : float2(-0,-0);
    r9.zw = r11.wz + r9.zw;
    r9.zw = r6.zz * r9.zw + r11.xy;
    r6.z = r9.w + -r9.z;
    r6.z = r6.w * r6.z + r9.z;
    r3.w = r6.z + r3.w;
    r7.w = r9.x;
    r6.zw = r7.wy * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r10.zw = -r6.zw * r5.xy + r7.wy;
    r10.xy = r10.zw + r5.xy;
    r11.xyzw = saturate(r10.zwxw);
    r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
    r12.x = sShadow.SampleLevel(__smpsShadow_s, r11.xy, 0).x;
    r12.w = sShadow.SampleLevel(__smpsShadow_s, r11.zw, 0).x;
    r10.xyzw = saturate(r10.zyxy);
    r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
    r12.y = sShadow.SampleLevel(__smpsShadow_s, r10.xy, 0).x;
    r12.z = sShadow.SampleLevel(__smpsShadow_s, r10.zw, 0).x;
    r10.xyzw = cmp(r12.xyzw < r3.xxxx);
    r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
    r7.yw = r10.xy ? float2(-1,-1) : float2(-0,-0);
    r7.yw = r11.wz + r7.yw;
    r7.yw = r6.zz * r7.yw + r11.xy;
    r6.z = r7.w + -r7.y;
    r6.z = r6.w * r6.z + r7.y;
    r3.w = r6.z + r3.w;
    r8.xz = r7.xz;
    r8.y = r9.y;
    r6.zw = r8.xy * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r7.zw = -r6.zw * r5.xy + r8.xy;
    r7.xy = r7.zw + r5.xy;
    r10.xyzw = saturate(r7.zwxw);
    r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
    r11.x = sShadow.SampleLevel(__smpsShadow_s, r10.xy, 0).x;
    r11.w = sShadow.SampleLevel(__smpsShadow_s, r10.zw, 0).x;
    r7.xyzw = saturate(r7.zyxy);
    r7.xyzw = r7.xyzw * r4.xyxy + r4.zwzw;
    r11.y = sShadow.SampleLevel(__smpsShadow_s, r7.xy, 0).x;
    r11.z = sShadow.SampleLevel(__smpsShadow_s, r7.zw, 0).x;
    r7.xyzw = cmp(r11.xyzw < r3.xxxx);
    r10.xyzw = r7.xyzw ? float4(1,1,1,1) : 0;
    r7.xy = r7.xy ? float2(-1,-1) : float2(-0,-0);
    r7.xy = r10.wz + r7.xy;
    r7.xy = r6.zz * r7.xy + r10.xy;
    r6.z = r7.y + -r7.x;
    r6.z = r6.w * r6.z + r7.x;
    r3.w = r6.z + r3.w;
    r6.zw = r8.zy * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r7.zw = -r6.zw * r5.xy + r8.zy;
    r7.xy = r7.zw + r5.xy;
    r10.xyzw = saturate(r7.zwxw);
    r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
    r11.x = sShadow.SampleLevel(__smpsShadow_s, r10.xy, 0).x;
    r11.w = sShadow.SampleLevel(__smpsShadow_s, r10.zw, 0).x;
    r7.xyzw = saturate(r7.zyxy);
    r7.xyzw = r7.xyzw * r4.xyxy + r4.zwzw;
    r11.y = sShadow.SampleLevel(__smpsShadow_s, r7.xy, 0).x;
    r11.z = sShadow.SampleLevel(__smpsShadow_s, r7.zw, 0).x;
    r7.xyzw = cmp(r11.xyzw < r3.xxxx);
    r10.xyzw = r7.xyzw ? float4(1,1,1,1) : 0;
    r7.xy = r7.xy ? float2(-1,-1) : float2(-0,-0);
    r7.xy = r10.wz + r7.xy;
    r7.xy = r6.zz * r7.xy + r10.xy;
    r6.z = r7.y + -r7.x;
    r6.z = r6.w * r6.z + r7.x;
    r3.w = r6.z + r3.w;
    r6.zw = r8.wy * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r7.zw = -r6.zw * r5.xy + r8.wy;
    r7.xy = r7.zw + r5.xy;
    r8.xyzw = saturate(r7.zwxw);
    r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
    r10.x = sShadow.SampleLevel(__smpsShadow_s, r8.xy, 0).x;
    r10.w = sShadow.SampleLevel(__smpsShadow_s, r8.zw, 0).x;
    r7.xyzw = saturate(r7.zyxy);
    r7.xyzw = r7.xyzw * r4.xyxy + r4.zwzw;
    r10.y = sShadow.SampleLevel(__smpsShadow_s, r7.xy, 0).x;
    r10.z = sShadow.SampleLevel(__smpsShadow_s, r7.zw, 0).x;
    r7.xyzw = cmp(r10.xyzw < r3.xxxx);
    r8.xyzw = r7.xyzw ? float4(1,1,1,1) : 0;
    r7.xy = r7.xy ? float2(-1,-1) : float2(-0,-0);
    r7.xy = r8.wz + r7.xy;
    r7.xy = r6.zz * r7.xy + r8.xy;
    r6.z = r7.y + -r7.x;
    r6.z = r6.w * r6.z + r7.x;
    r3.w = r6.z + r3.w;
    r6.zw = r9.xy * r5.zw + float2(-0.5,-0.5);
    r6.zw = frac(r6.zw);
    r7.zw = -r6.zw * r5.xy + r9.xy;
    r7.xy = r7.zw + r5.xy;
    r8.xyzw = saturate(r7.zwxw);
    r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
    r9.x = sShadow.SampleLevel(__smpsShadow_s, r8.xy, 0).x;
    r9.w = sShadow.SampleLevel(__smpsShadow_s, r8.zw, 0).x;
    r7.xyzw = saturate(r7.zyxy);
    r7.xyzw = r7.xyzw * r4.xyxy + r4.zwzw;
    r9.y = sShadow.SampleLevel(__smpsShadow_s, r7.xy, 0).x;
    r9.z = sShadow.SampleLevel(__smpsShadow_s, r7.zw, 0).x;
    r7.xyzw = cmp(r9.xyzw < r3.xxxx);
    r8.xyzw = r7.xyzw ? float4(1,1,1,1) : 0;
    r7.xy = r7.xy ? float2(-1,-1) : float2(-0,-0);
    r7.xy = r8.wz + r7.xy;
    r7.xy = r6.zz * r7.xy + r8.xy;
    r6.z = r7.y + -r7.x;
    r6.z = r6.w * r6.z + r7.x;
    r3.w = r6.z + r3.w;
    r3.w = 0.0625 * r3.w;
  } else {
    r6.z = cmp(r0.w == 1.000000);
    if (r6.z != 0) {
      r7.xw = r6.xy + r3.yz;
      r3.x = saturate(r3.x);
      r6.zw = r7.xw * r5.zw + float2(-0.5,-0.5);
      r6.zw = frac(r6.zw);
      r8.zw = -r6.zw * r5.xy + r7.xw;
      r8.xy = r8.zw + r5.xy;
      r9.xyzw = saturate(r8.zwxw);
      r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
      r10.x = sShadow2.SampleLevel(__smpsShadow2_s, r9.xy, 0).x;
      r10.w = sShadow2.SampleLevel(__smpsShadow2_s, r9.zw, 0).x;
      r8.xyzw = saturate(r8.zyxy);
      r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
      r10.y = sShadow2.SampleLevel(__smpsShadow2_s, r8.xy, 0).x;
      r10.z = sShadow2.SampleLevel(__smpsShadow2_s, r8.zw, 0).x;
      r8.xyzw = cmp(r10.xyzw < r3.xxxx);
      r9.xyzw = r8.xyzw ? float4(1,1,1,1) : 0;
      r8.xy = r8.xy ? float2(-1,-1) : float2(-0,-0);
      r8.xy = r9.wz + r8.xy;
      r8.xy = r6.zz * r8.xy + r9.xy;
      r6.z = r8.y + -r8.x;
      r6.z = r6.w * r6.z + r8.x;
      r7.yz = r7.wx + r5.yx;
      r8.xy = r7.zw * r5.zw + float2(-0.5,-0.5);
      r8.xy = frac(r8.xy);
      r9.zw = -r8.xy * r5.xy + r7.zw;
      r9.xy = r9.zw + r5.xy;
      r10.xyzw = saturate(r9.zwxw);
      r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
      r11.x = sShadow2.SampleLevel(__smpsShadow2_s, r10.xy, 0).x;
      r11.w = sShadow2.SampleLevel(__smpsShadow2_s, r10.zw, 0).x;
      r9.xyzw = saturate(r9.zyxy);
      r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
      r11.y = sShadow2.SampleLevel(__smpsShadow2_s, r9.xy, 0).x;
      r11.z = sShadow2.SampleLevel(__smpsShadow2_s, r9.zw, 0).x;
      r9.xyzw = cmp(r11.xyzw < r3.xxxx);
      r10.xyzw = r9.xyzw ? float4(1,1,1,1) : 0;
      r8.zw = r9.xy ? float2(-1,-1) : float2(-0,-0);
      r8.zw = r10.wz + r8.zw;
      r8.xz = r8.xx * r8.zw + r10.xy;
      r6.w = r8.z + -r8.x;
      r6.w = r8.y * r6.w + r8.x;
      r6.z = r6.z + r6.w;
      r8.xw = r7.yz + r5.yx;
      r8.yz = r7.wy;
      r9.xy = r8.wy * r5.zw + float2(-0.5,-0.5);
      r9.xy = frac(r9.xy);
      r10.zw = -r9.xy * r5.xy + r8.wy;
      r10.xy = r10.zw + r5.xy;
      r11.xyzw = saturate(r10.zwxw);
      r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
      r12.x = sShadow2.SampleLevel(__smpsShadow2_s, r11.xy, 0).x;
      r12.w = sShadow2.SampleLevel(__smpsShadow2_s, r11.zw, 0).x;
      r10.xyzw = saturate(r10.zyxy);
      r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
      r12.y = sShadow2.SampleLevel(__smpsShadow2_s, r10.xy, 0).x;
      r12.z = sShadow2.SampleLevel(__smpsShadow2_s, r10.zw, 0).x;
      r10.xyzw = cmp(r12.xyzw < r3.xxxx);
      r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
      r9.zw = r10.xy ? float2(-1,-1) : float2(-0,-0);
      r9.zw = r11.wz + r9.zw;
      r9.xz = r9.xx * r9.zw + r11.xy;
      r6.w = r9.z + -r9.x;
      r6.w = r9.y * r6.w + r9.x;
      r6.z = r6.z + r6.w;
      r9.xy = r8.wx + r5.xy;
      r9.zw = r8.yz;
      r10.xy = r9.xz * r5.zw + float2(-0.5,-0.5);
      r10.xy = frac(r10.xy);
      r11.zw = -r10.xy * r5.xy + r9.xz;
      r11.xy = r11.zw + r5.xy;
      r12.xyzw = saturate(r11.zwxw);
      r12.xyzw = r12.xyzw * r4.xyxy + r4.zwzw;
      r13.x = sShadow2.SampleLevel(__smpsShadow2_s, r12.xy, 0).x;
      r13.w = sShadow2.SampleLevel(__smpsShadow2_s, r12.zw, 0).x;
      r11.xyzw = saturate(r11.zyxy);
      r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
      r13.y = sShadow2.SampleLevel(__smpsShadow2_s, r11.xy, 0).x;
      r13.z = sShadow2.SampleLevel(__smpsShadow2_s, r11.zw, 0).x;
      r11.xyzw = cmp(r13.xyzw < r3.xxxx);
      r12.xyzw = r11.xyzw ? float4(1,1,1,1) : 0;
      r10.zw = r11.xy ? float2(-1,-1) : float2(-0,-0);
      r10.zw = r12.wz + r10.zw;
      r10.xz = r10.xx * r10.zw + r12.xy;
      r6.w = r10.z + -r10.x;
      r6.w = r10.y * r6.w + r10.x;
      r6.z = r6.z + r6.w;
      r10.xy = r7.xy * r5.zw + float2(-0.5,-0.5);
      r10.xy = frac(r10.xy);
      r11.zw = -r10.xy * r5.xy + r7.xy;
      r11.xy = r11.zw + r5.xy;
      r12.xyzw = saturate(r11.zwxw);
      r12.xyzw = r12.xyzw * r4.xyxy + r4.zwzw;
      r13.x = sShadow2.SampleLevel(__smpsShadow2_s, r12.xy, 0).x;
      r13.w = sShadow2.SampleLevel(__smpsShadow2_s, r12.zw, 0).x;
      r11.xyzw = saturate(r11.zyxy);
      r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
      r13.y = sShadow2.SampleLevel(__smpsShadow2_s, r11.xy, 0).x;
      r13.z = sShadow2.SampleLevel(__smpsShadow2_s, r11.zw, 0).x;
      r11.xyzw = cmp(r13.xyzw < r3.xxxx);
      r12.xyzw = r11.xyzw ? float4(1,1,1,1) : 0;
      r10.zw = r11.xy ? float2(-1,-1) : float2(-0,-0);
      r10.zw = r12.wz + r10.zw;
      r10.xz = r10.xx * r10.zw + r12.xy;
      r6.w = r10.z + -r10.x;
      r6.w = r10.y * r6.w + r10.x;
      r6.z = r6.z + r6.w;
      r10.xy = r7.zy * r5.zw + float2(-0.5,-0.5);
      r10.xy = frac(r10.xy);
      r11.zw = -r10.xy * r5.xy + r7.zy;
      r11.xy = r11.zw + r5.xy;
      r12.xyzw = saturate(r11.zwxw);
      r12.xyzw = r12.xyzw * r4.xyxy + r4.zwzw;
      r13.x = sShadow2.SampleLevel(__smpsShadow2_s, r12.xy, 0).x;
      r13.w = sShadow2.SampleLevel(__smpsShadow2_s, r12.zw, 0).x;
      r11.xyzw = saturate(r11.zyxy);
      r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
      r13.y = sShadow2.SampleLevel(__smpsShadow2_s, r11.xy, 0).x;
      r13.z = sShadow2.SampleLevel(__smpsShadow2_s, r11.zw, 0).x;
      r11.xyzw = cmp(r13.xyzw < r3.xxxx);
      r12.xyzw = r11.xyzw ? float4(1,1,1,1) : 0;
      r10.zw = r11.xy ? float2(-1,-1) : float2(-0,-0);
      r10.zw = r12.wz + r10.zw;
      r10.xz = r10.xx * r10.zw + r12.xy;
      r6.w = r10.z + -r10.x;
      r6.w = r10.y * r6.w + r10.x;
      r6.z = r6.z + r6.w;
      r10.xy = r8.wz * r5.zw + float2(-0.5,-0.5);
      r10.xy = frac(r10.xy);
      r11.zw = -r10.xy * r5.xy + r8.wz;
      r11.xy = r11.zw + r5.xy;
      r12.xyzw = saturate(r11.zwxw);
      r12.xyzw = r12.xyzw * r4.xyxy + r4.zwzw;
      r13.x = sShadow2.SampleLevel(__smpsShadow2_s, r12.xy, 0).x;
      r13.w = sShadow2.SampleLevel(__smpsShadow2_s, r12.zw, 0).x;
      r11.xyzw = saturate(r11.zyxy);
      r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
      r13.y = sShadow2.SampleLevel(__smpsShadow2_s, r11.xy, 0).x;
      r13.z = sShadow2.SampleLevel(__smpsShadow2_s, r11.zw, 0).x;
      r11.xyzw = cmp(r13.xyzw < r3.xxxx);
      r12.xyzw = r11.xyzw ? float4(1,1,1,1) : 0;
      r10.zw = r11.xy ? float2(-1,-1) : float2(-0,-0);
      r10.zw = r12.wz + r10.zw;
      r10.xz = r10.xx * r10.zw + r12.xy;
      r6.w = r10.z + -r10.x;
      r6.w = r10.y * r6.w + r10.x;
      r6.z = r6.z + r6.w;
      r10.xy = r9.xw * r5.zw + float2(-0.5,-0.5);
      r10.xy = frac(r10.xy);
      r11.zw = -r10.xy * r5.xy + r9.xw;
      r11.xy = r11.zw + r5.xy;
      r12.xyzw = saturate(r11.zwxw);
      r12.xyzw = r12.xyzw * r4.xyxy + r4.zwzw;
      r13.x = sShadow2.SampleLevel(__smpsShadow2_s, r12.xy, 0).x;
      r13.w = sShadow2.SampleLevel(__smpsShadow2_s, r12.zw, 0).x;
      r11.xyzw = saturate(r11.zyxy);
      r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
      r13.y = sShadow2.SampleLevel(__smpsShadow2_s, r11.xy, 0).x;
      r13.z = sShadow2.SampleLevel(__smpsShadow2_s, r11.zw, 0).x;
      r11.xyzw = cmp(r13.xyzw < r3.xxxx);
      r12.xyzw = r11.xyzw ? float4(1,1,1,1) : 0;
      r9.zw = r11.xy ? float2(-1,-1) : float2(-0,-0);
      r9.zw = r12.wz + r9.zw;
      r9.zw = r10.xx * r9.zw + r12.xy;
      r6.w = r9.w + -r9.z;
      r6.w = r10.y * r6.w + r9.z;
      r6.z = r6.z + r6.w;
      r7.y = r8.x;
      r9.zw = r7.xy * r5.zw + float2(-0.5,-0.5);
      r9.zw = frac(r9.zw);
      r10.zw = -r9.zw * r5.xy + r7.xy;
      r10.xy = r10.zw + r5.xy;
      r11.xyzw = saturate(r10.zwxw);
      r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
      r12.x = sShadow2.SampleLevel(__smpsShadow2_s, r11.xy, 0).x;
      r12.w = sShadow2.SampleLevel(__smpsShadow2_s, r11.zw, 0).x;
      r10.xyzw = saturate(r10.zyxy);
      r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
      r12.y = sShadow2.SampleLevel(__smpsShadow2_s, r10.xy, 0).x;
      r12.z = sShadow2.SampleLevel(__smpsShadow2_s, r10.zw, 0).x;
      r10.xyzw = cmp(r12.xyzw < r3.xxxx);
      r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
      r10.xy = r10.xy ? float2(-1,-1) : float2(-0,-0);
      r10.xy = r11.wz + r10.xy;
      r10.xy = r9.zz * r10.xy + r11.xy;
      r6.w = r10.y + -r10.x;
      r6.w = r9.w * r6.w + r10.x;
      r6.z = r6.z + r6.w;
      r9.zw = r7.zy * r5.zw + float2(-0.5,-0.5);
      r9.zw = frac(r9.zw);
      r10.zw = -r9.zw * r5.xy + r7.zy;
      r10.xy = r10.zw + r5.xy;
      r11.xyzw = saturate(r10.zwxw);
      r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
      r12.x = sShadow2.SampleLevel(__smpsShadow2_s, r11.xy, 0).x;
      r12.w = sShadow2.SampleLevel(__smpsShadow2_s, r11.zw, 0).x;
      r10.xyzw = saturate(r10.zyxy);
      r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
      r12.y = sShadow2.SampleLevel(__smpsShadow2_s, r10.xy, 0).x;
      r12.z = sShadow2.SampleLevel(__smpsShadow2_s, r10.zw, 0).x;
      r10.xyzw = cmp(r12.xyzw < r3.xxxx);
      r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
      r10.xy = r10.xy ? float2(-1,-1) : float2(-0,-0);
      r10.xy = r11.wz + r10.xy;
      r10.xy = r9.zz * r10.xy + r11.xy;
      r6.w = r10.y + -r10.x;
      r6.w = r9.w * r6.w + r10.x;
      r6.z = r6.z + r6.w;
      r9.zw = r8.wx * r5.zw + float2(-0.5,-0.5);
      r9.zw = frac(r9.zw);
      r10.zw = -r9.zw * r5.xy + r8.wx;
      r10.xy = r10.zw + r5.xy;
      r11.xyzw = saturate(r10.zwxw);
      r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
      r12.x = sShadow2.SampleLevel(__smpsShadow2_s, r11.xy, 0).x;
      r12.w = sShadow2.SampleLevel(__smpsShadow2_s, r11.zw, 0).x;
      r10.xyzw = saturate(r10.zyxy);
      r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
      r12.y = sShadow2.SampleLevel(__smpsShadow2_s, r10.xy, 0).x;
      r12.z = sShadow2.SampleLevel(__smpsShadow2_s, r10.zw, 0).x;
      r10.xyzw = cmp(r12.xyzw < r3.xxxx);
      r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
      r10.xy = r10.xy ? float2(-1,-1) : float2(-0,-0);
      r10.xy = r11.wz + r10.xy;
      r10.xy = r9.zz * r10.xy + r11.xy;
      r6.w = r10.y + -r10.x;
      r6.w = r9.w * r6.w + r10.x;
      r6.z = r6.z + r6.w;
      r7.w = r9.x;
      r9.zw = r7.wy * r5.zw + float2(-0.5,-0.5);
      r9.zw = frac(r9.zw);
      r10.zw = -r9.zw * r5.xy + r7.wy;
      r10.xy = r10.zw + r5.xy;
      r11.xyzw = saturate(r10.zwxw);
      r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
      r12.x = sShadow2.SampleLevel(__smpsShadow2_s, r11.xy, 0).x;
      r12.w = sShadow2.SampleLevel(__smpsShadow2_s, r11.zw, 0).x;
      r10.xyzw = saturate(r10.zyxy);
      r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
      r12.y = sShadow2.SampleLevel(__smpsShadow2_s, r10.xy, 0).x;
      r12.z = sShadow2.SampleLevel(__smpsShadow2_s, r10.zw, 0).x;
      r10.xyzw = cmp(r12.xyzw < r3.xxxx);
      r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
      r7.yw = r10.xy ? float2(-1,-1) : float2(-0,-0);
      r7.yw = r11.wz + r7.yw;
      r7.yw = r9.zz * r7.yw + r11.xy;
      r6.w = r7.w + -r7.y;
      r6.w = r9.w * r6.w + r7.y;
      r6.z = r6.z + r6.w;
      r8.xz = r7.xz;
      r8.y = r9.y;
      r7.xy = r8.xy * r5.zw + float2(-0.5,-0.5);
      r7.xy = frac(r7.xy);
      r10.zw = -r7.xy * r5.xy + r8.xy;
      r10.xy = r10.zw + r5.xy;
      r11.xyzw = saturate(r10.zwxw);
      r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
      r12.x = sShadow2.SampleLevel(__smpsShadow2_s, r11.xy, 0).x;
      r12.w = sShadow2.SampleLevel(__smpsShadow2_s, r11.zw, 0).x;
      r10.xyzw = saturate(r10.zyxy);
      r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
      r12.y = sShadow2.SampleLevel(__smpsShadow2_s, r10.xy, 0).x;
      r12.z = sShadow2.SampleLevel(__smpsShadow2_s, r10.zw, 0).x;
      r10.xyzw = cmp(r12.xyzw < r3.xxxx);
      r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
      r7.zw = r10.xy ? float2(-1,-1) : float2(-0,-0);
      r7.zw = r11.wz + r7.zw;
      r7.xz = r7.xx * r7.zw + r11.xy;
      r6.w = r7.z + -r7.x;
      r6.w = r7.y * r6.w + r7.x;
      r6.z = r6.z + r6.w;
      r7.xy = r8.zy * r5.zw + float2(-0.5,-0.5);
      r7.xy = frac(r7.xy);
      r10.zw = -r7.xy * r5.xy + r8.zy;
      r10.xy = r10.zw + r5.xy;
      r11.xyzw = saturate(r10.zwxw);
      r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
      r12.x = sShadow2.SampleLevel(__smpsShadow2_s, r11.xy, 0).x;
      r12.w = sShadow2.SampleLevel(__smpsShadow2_s, r11.zw, 0).x;
      r10.xyzw = saturate(r10.zyxy);
      r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
      r12.y = sShadow2.SampleLevel(__smpsShadow2_s, r10.xy, 0).x;
      r12.z = sShadow2.SampleLevel(__smpsShadow2_s, r10.zw, 0).x;
      r10.xyzw = cmp(r12.xyzw < r3.xxxx);
      r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
      r7.zw = r10.xy ? float2(-1,-1) : float2(-0,-0);
      r7.zw = r11.wz + r7.zw;
      r7.xz = r7.xx * r7.zw + r11.xy;
      r6.w = r7.z + -r7.x;
      r6.w = r7.y * r6.w + r7.x;
      r6.z = r6.z + r6.w;
      r7.xy = r8.wy * r5.zw + float2(-0.5,-0.5);
      r7.xy = frac(r7.xy);
      r8.zw = -r7.xy * r5.xy + r8.wy;
      r8.xy = r8.zw + r5.xy;
      r10.xyzw = saturate(r8.zwxw);
      r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
      r11.x = sShadow2.SampleLevel(__smpsShadow2_s, r10.xy, 0).x;
      r11.w = sShadow2.SampleLevel(__smpsShadow2_s, r10.zw, 0).x;
      r8.xyzw = saturate(r8.zyxy);
      r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
      r11.y = sShadow2.SampleLevel(__smpsShadow2_s, r8.xy, 0).x;
      r11.z = sShadow2.SampleLevel(__smpsShadow2_s, r8.zw, 0).x;
      r8.xyzw = cmp(r11.xyzw < r3.xxxx);
      r10.xyzw = r8.xyzw ? float4(1,1,1,1) : 0;
      r7.zw = r8.xy ? float2(-1,-1) : float2(-0,-0);
      r7.zw = r10.wz + r7.zw;
      r7.xz = r7.xx * r7.zw + r10.xy;
      r6.w = r7.z + -r7.x;
      r6.w = r7.y * r6.w + r7.x;
      r6.z = r6.z + r6.w;
      r7.xy = r9.xy * r5.zw + float2(-0.5,-0.5);
      r7.xy = frac(r7.xy);
      r8.zw = -r7.xy * r5.xy + r9.xy;
      r8.xy = r8.zw + r5.xy;
      r9.xyzw = saturate(r8.zwxw);
      r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
      r10.x = sShadow2.SampleLevel(__smpsShadow2_s, r9.xy, 0).x;
      r10.w = sShadow2.SampleLevel(__smpsShadow2_s, r9.zw, 0).x;
      r8.xyzw = saturate(r8.zyxy);
      r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
      r10.y = sShadow2.SampleLevel(__smpsShadow2_s, r8.xy, 0).x;
      r10.z = sShadow2.SampleLevel(__smpsShadow2_s, r8.zw, 0).x;
      r8.xyzw = cmp(r10.xyzw < r3.xxxx);
      r9.xyzw = r8.xyzw ? float4(1,1,1,1) : 0;
      r7.zw = r8.xy ? float2(-1,-1) : float2(-0,-0);
      r7.zw = r9.wz + r7.zw;
      r7.xz = r7.xx * r7.zw + r9.xy;
      r6.w = r7.z + -r7.x;
      r6.w = r7.y * r6.w + r7.x;
      r6.z = r6.z + r6.w;
      r3.w = 0.0625 * r6.z;
    } else {
      r0.w = cmp(r0.w == 2.000000);
      if (r0.w != 0) {
        r7.xw = r6.xy + r3.yz;
        r3.x = saturate(r3.x);
        r6.zw = r7.xw * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r8.zw = -r6.zw * r5.xy + r7.xw;
        r8.xy = r8.zw + r5.xy;
        r9.xyzw = saturate(r8.zwxw);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r10.x = sShadow3.SampleLevel(__smpsShadow3_s, r9.xy, 0).x;
        r10.w = sShadow3.SampleLevel(__smpsShadow3_s, r9.zw, 0).x;
        r8.xyzw = saturate(r8.zyxy);
        r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
        r10.y = sShadow3.SampleLevel(__smpsShadow3_s, r8.xy, 0).x;
        r10.z = sShadow3.SampleLevel(__smpsShadow3_s, r8.zw, 0).x;
        r8.xyzw = cmp(r10.xyzw < r3.xxxx);
        r9.xyzw = r8.xyzw ? float4(1,1,1,1) : 0;
        r8.xy = r8.xy ? float2(-1,-1) : float2(-0,-0);
        r8.xy = r9.wz + r8.xy;
        r8.xy = r6.zz * r8.xy + r9.xy;
        r0.w = r8.y + -r8.x;
        r0.w = r6.w * r0.w + r8.x;
        r7.yz = r7.wx + r5.yx;
        r6.zw = r7.zw * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r8.zw = -r6.zw * r5.xy + r7.zw;
        r8.xy = r8.zw + r5.xy;
        r9.xyzw = saturate(r8.zwxw);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r10.x = sShadow3.SampleLevel(__smpsShadow3_s, r9.xy, 0).x;
        r10.w = sShadow3.SampleLevel(__smpsShadow3_s, r9.zw, 0).x;
        r8.xyzw = saturate(r8.zyxy);
        r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
        r10.y = sShadow3.SampleLevel(__smpsShadow3_s, r8.xy, 0).x;
        r10.z = sShadow3.SampleLevel(__smpsShadow3_s, r8.zw, 0).x;
        r8.xyzw = cmp(r10.xyzw < r3.xxxx);
        r9.xyzw = r8.xyzw ? float4(1,1,1,1) : 0;
        r8.xy = r8.xy ? float2(-1,-1) : float2(-0,-0);
        r8.xy = r9.wz + r8.xy;
        r8.xy = r6.zz * r8.xy + r9.xy;
        r6.z = r8.y + -r8.x;
        r6.z = r6.w * r6.z + r8.x;
        r0.w = r6.z + r0.w;
        r8.xw = r7.yz + r5.yx;
        r8.yz = r7.wy;
        r6.zw = r8.wy * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r9.zw = -r6.zw * r5.xy + r8.wy;
        r9.xy = r9.zw + r5.xy;
        r10.xyzw = saturate(r9.zwxw);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r11.x = sShadow3.SampleLevel(__smpsShadow3_s, r10.xy, 0).x;
        r11.w = sShadow3.SampleLevel(__smpsShadow3_s, r10.zw, 0).x;
        r9.xyzw = saturate(r9.zyxy);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r11.y = sShadow3.SampleLevel(__smpsShadow3_s, r9.xy, 0).x;
        r11.z = sShadow3.SampleLevel(__smpsShadow3_s, r9.zw, 0).x;
        r9.xyzw = cmp(r11.xyzw < r3.xxxx);
        r10.xyzw = r9.xyzw ? float4(1,1,1,1) : 0;
        r9.xy = r9.xy ? float2(-1,-1) : float2(-0,-0);
        r9.xy = r10.wz + r9.xy;
        r9.xy = r6.zz * r9.xy + r10.xy;
        r6.z = r9.y + -r9.x;
        r6.z = r6.w * r6.z + r9.x;
        r0.w = r6.z + r0.w;
        r9.xy = r8.wx + r5.xy;
        r9.zw = r8.yz;
        r6.zw = r9.xz * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r10.zw = -r6.zw * r5.xy + r9.xz;
        r10.xy = r10.zw + r5.xy;
        r11.xyzw = saturate(r10.zwxw);
        r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
        r12.x = sShadow3.SampleLevel(__smpsShadow3_s, r11.xy, 0).x;
        r12.w = sShadow3.SampleLevel(__smpsShadow3_s, r11.zw, 0).x;
        r10.xyzw = saturate(r10.zyxy);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r12.y = sShadow3.SampleLevel(__smpsShadow3_s, r10.xy, 0).x;
        r12.z = sShadow3.SampleLevel(__smpsShadow3_s, r10.zw, 0).x;
        r10.xyzw = cmp(r12.xyzw < r3.xxxx);
        r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
        r10.xy = r10.xy ? float2(-1,-1) : float2(-0,-0);
        r10.xy = r11.wz + r10.xy;
        r10.xy = r6.zz * r10.xy + r11.xy;
        r6.z = r10.y + -r10.x;
        r6.z = r6.w * r6.z + r10.x;
        r0.w = r6.z + r0.w;
        r6.zw = r7.xy * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r10.zw = -r6.zw * r5.xy + r7.xy;
        r10.xy = r10.zw + r5.xy;
        r11.xyzw = saturate(r10.zwxw);
        r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
        r12.x = sShadow3.SampleLevel(__smpsShadow3_s, r11.xy, 0).x;
        r12.w = sShadow3.SampleLevel(__smpsShadow3_s, r11.zw, 0).x;
        r10.xyzw = saturate(r10.zyxy);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r12.y = sShadow3.SampleLevel(__smpsShadow3_s, r10.xy, 0).x;
        r12.z = sShadow3.SampleLevel(__smpsShadow3_s, r10.zw, 0).x;
        r10.xyzw = cmp(r12.xyzw < r3.xxxx);
        r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
        r10.xy = r10.xy ? float2(-1,-1) : float2(-0,-0);
        r10.xy = r11.wz + r10.xy;
        r10.xy = r6.zz * r10.xy + r11.xy;
        r6.z = r10.y + -r10.x;
        r6.z = r6.w * r6.z + r10.x;
        r0.w = r6.z + r0.w;
        r6.zw = r7.zy * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r10.zw = -r6.zw * r5.xy + r7.zy;
        r10.xy = r10.zw + r5.xy;
        r11.xyzw = saturate(r10.zwxw);
        r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
        r12.x = sShadow3.SampleLevel(__smpsShadow3_s, r11.xy, 0).x;
        r12.w = sShadow3.SampleLevel(__smpsShadow3_s, r11.zw, 0).x;
        r10.xyzw = saturate(r10.zyxy);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r12.y = sShadow3.SampleLevel(__smpsShadow3_s, r10.xy, 0).x;
        r12.z = sShadow3.SampleLevel(__smpsShadow3_s, r10.zw, 0).x;
        r10.xyzw = cmp(r12.xyzw < r3.xxxx);
        r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
        r10.xy = r10.xy ? float2(-1,-1) : float2(-0,-0);
        r10.xy = r11.wz + r10.xy;
        r10.xy = r6.zz * r10.xy + r11.xy;
        r6.z = r10.y + -r10.x;
        r6.z = r6.w * r6.z + r10.x;
        r0.w = r6.z + r0.w;
        r6.zw = r8.wz * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r10.zw = -r6.zw * r5.xy + r8.wz;
        r10.xy = r10.zw + r5.xy;
        r11.xyzw = saturate(r10.zwxw);
        r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
        r12.x = sShadow3.SampleLevel(__smpsShadow3_s, r11.xy, 0).x;
        r12.w = sShadow3.SampleLevel(__smpsShadow3_s, r11.zw, 0).x;
        r10.xyzw = saturate(r10.zyxy);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r12.y = sShadow3.SampleLevel(__smpsShadow3_s, r10.xy, 0).x;
        r12.z = sShadow3.SampleLevel(__smpsShadow3_s, r10.zw, 0).x;
        r10.xyzw = cmp(r12.xyzw < r3.xxxx);
        r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
        r10.xy = r10.xy ? float2(-1,-1) : float2(-0,-0);
        r10.xy = r11.wz + r10.xy;
        r10.xy = r6.zz * r10.xy + r11.xy;
        r6.z = r10.y + -r10.x;
        r6.z = r6.w * r6.z + r10.x;
        r0.w = r6.z + r0.w;
        r6.zw = r9.xw * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r10.zw = -r6.zw * r5.xy + r9.xw;
        r10.xy = r10.zw + r5.xy;
        r11.xyzw = saturate(r10.zwxw);
        r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
        r12.x = sShadow3.SampleLevel(__smpsShadow3_s, r11.xy, 0).x;
        r12.w = sShadow3.SampleLevel(__smpsShadow3_s, r11.zw, 0).x;
        r10.xyzw = saturate(r10.zyxy);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r12.y = sShadow3.SampleLevel(__smpsShadow3_s, r10.xy, 0).x;
        r12.z = sShadow3.SampleLevel(__smpsShadow3_s, r10.zw, 0).x;
        r10.xyzw = cmp(r12.xyzw < r3.xxxx);
        r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
        r9.zw = r10.xy ? float2(-1,-1) : float2(-0,-0);
        r9.zw = r11.wz + r9.zw;
        r9.zw = r6.zz * r9.zw + r11.xy;
        r6.z = r9.w + -r9.z;
        r6.z = r6.w * r6.z + r9.z;
        r0.w = r6.z + r0.w;
        r7.y = r8.x;
        r6.zw = r7.xy * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r10.zw = -r6.zw * r5.xy + r7.xy;
        r10.xy = r10.zw + r5.xy;
        r11.xyzw = saturate(r10.zwxw);
        r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
        r12.x = sShadow3.SampleLevel(__smpsShadow3_s, r11.xy, 0).x;
        r12.w = sShadow3.SampleLevel(__smpsShadow3_s, r11.zw, 0).x;
        r10.xyzw = saturate(r10.zyxy);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r12.y = sShadow3.SampleLevel(__smpsShadow3_s, r10.xy, 0).x;
        r12.z = sShadow3.SampleLevel(__smpsShadow3_s, r10.zw, 0).x;
        r10.xyzw = cmp(r12.xyzw < r3.xxxx);
        r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
        r9.zw = r10.xy ? float2(-1,-1) : float2(-0,-0);
        r9.zw = r11.wz + r9.zw;
        r9.zw = r6.zz * r9.zw + r11.xy;
        r6.z = r9.w + -r9.z;
        r6.z = r6.w * r6.z + r9.z;
        r0.w = r6.z + r0.w;
        r6.zw = r7.zy * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r10.zw = -r6.zw * r5.xy + r7.zy;
        r10.xy = r10.zw + r5.xy;
        r11.xyzw = saturate(r10.zwxw);
        r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
        r12.x = sShadow3.SampleLevel(__smpsShadow3_s, r11.xy, 0).x;
        r12.w = sShadow3.SampleLevel(__smpsShadow3_s, r11.zw, 0).x;
        r10.xyzw = saturate(r10.zyxy);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r12.y = sShadow3.SampleLevel(__smpsShadow3_s, r10.xy, 0).x;
        r12.z = sShadow3.SampleLevel(__smpsShadow3_s, r10.zw, 0).x;
        r10.xyzw = cmp(r12.xyzw < r3.xxxx);
        r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
        r9.zw = r10.xy ? float2(-1,-1) : float2(-0,-0);
        r9.zw = r11.wz + r9.zw;
        r9.zw = r6.zz * r9.zw + r11.xy;
        r6.z = r9.w + -r9.z;
        r6.z = r6.w * r6.z + r9.z;
        r0.w = r6.z + r0.w;
        r6.zw = r8.wx * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r10.zw = -r6.zw * r5.xy + r8.wx;
        r10.xy = r10.zw + r5.xy;
        r11.xyzw = saturate(r10.zwxw);
        r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
        r12.x = sShadow3.SampleLevel(__smpsShadow3_s, r11.xy, 0).x;
        r12.w = sShadow3.SampleLevel(__smpsShadow3_s, r11.zw, 0).x;
        r10.xyzw = saturate(r10.zyxy);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r12.y = sShadow3.SampleLevel(__smpsShadow3_s, r10.xy, 0).x;
        r12.z = sShadow3.SampleLevel(__smpsShadow3_s, r10.zw, 0).x;
        r10.xyzw = cmp(r12.xyzw < r3.xxxx);
        r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
        r9.zw = r10.xy ? float2(-1,-1) : float2(-0,-0);
        r9.zw = r11.wz + r9.zw;
        r9.zw = r6.zz * r9.zw + r11.xy;
        r6.z = r9.w + -r9.z;
        r6.z = r6.w * r6.z + r9.z;
        r0.w = r6.z + r0.w;
        r7.w = r9.x;
        r6.zw = r7.wy * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r10.zw = -r6.zw * r5.xy + r7.wy;
        r10.xy = r10.zw + r5.xy;
        r11.xyzw = saturate(r10.zwxw);
        r11.xyzw = r11.xyzw * r4.xyxy + r4.zwzw;
        r12.x = sShadow3.SampleLevel(__smpsShadow3_s, r11.xy, 0).x;
        r12.w = sShadow3.SampleLevel(__smpsShadow3_s, r11.zw, 0).x;
        r10.xyzw = saturate(r10.zyxy);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r12.y = sShadow3.SampleLevel(__smpsShadow3_s, r10.xy, 0).x;
        r12.z = sShadow3.SampleLevel(__smpsShadow3_s, r10.zw, 0).x;
        r10.xyzw = cmp(r12.xyzw < r3.xxxx);
        r11.xyzw = r10.xyzw ? float4(1,1,1,1) : 0;
        r7.yw = r10.xy ? float2(-1,-1) : float2(-0,-0);
        r7.yw = r11.wz + r7.yw;
        r7.yw = r6.zz * r7.yw + r11.xy;
        r6.z = r7.w + -r7.y;
        r6.z = r6.w * r6.z + r7.y;
        r0.w = r6.z + r0.w;
        r8.xz = r7.xz;
        r8.y = r9.y;
        r6.zw = r8.xy * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r7.zw = -r6.zw * r5.xy + r8.xy;
        r7.xy = r7.zw + r5.xy;
        r10.xyzw = saturate(r7.zwxw);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r11.x = sShadow3.SampleLevel(__smpsShadow3_s, r10.xy, 0).x;
        r11.w = sShadow3.SampleLevel(__smpsShadow3_s, r10.zw, 0).x;
        r7.xyzw = saturate(r7.zyxy);
        r7.xyzw = r7.xyzw * r4.xyxy + r4.zwzw;
        r11.y = sShadow3.SampleLevel(__smpsShadow3_s, r7.xy, 0).x;
        r11.z = sShadow3.SampleLevel(__smpsShadow3_s, r7.zw, 0).x;
        r7.xyzw = cmp(r11.xyzw < r3.xxxx);
        r10.xyzw = r7.xyzw ? float4(1,1,1,1) : 0;
        r7.xy = r7.xy ? float2(-1,-1) : float2(-0,-0);
        r7.xy = r10.wz + r7.xy;
        r7.xy = r6.zz * r7.xy + r10.xy;
        r6.z = r7.y + -r7.x;
        r6.z = r6.w * r6.z + r7.x;
        r0.w = r6.z + r0.w;
        r6.zw = r8.zy * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r7.zw = -r6.zw * r5.xy + r8.zy;
        r7.xy = r7.zw + r5.xy;
        r10.xyzw = saturate(r7.zwxw);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r11.x = sShadow3.SampleLevel(__smpsShadow3_s, r10.xy, 0).x;
        r11.w = sShadow3.SampleLevel(__smpsShadow3_s, r10.zw, 0).x;
        r7.xyzw = saturate(r7.zyxy);
        r7.xyzw = r7.xyzw * r4.xyxy + r4.zwzw;
        r11.y = sShadow3.SampleLevel(__smpsShadow3_s, r7.xy, 0).x;
        r11.z = sShadow3.SampleLevel(__smpsShadow3_s, r7.zw, 0).x;
        r7.xyzw = cmp(r11.xyzw < r3.xxxx);
        r10.xyzw = r7.xyzw ? float4(1,1,1,1) : 0;
        r7.xy = r7.xy ? float2(-1,-1) : float2(-0,-0);
        r7.xy = r10.wz + r7.xy;
        r7.xy = r6.zz * r7.xy + r10.xy;
        r6.z = r7.y + -r7.x;
        r6.z = r6.w * r6.z + r7.x;
        r0.w = r6.z + r0.w;
        r6.zw = r8.wy * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r7.zw = -r6.zw * r5.xy + r8.wy;
        r7.xy = r7.zw + r5.xy;
        r8.xyzw = saturate(r7.zwxw);
        r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
        r10.x = sShadow3.SampleLevel(__smpsShadow3_s, r8.xy, 0).x;
        r10.w = sShadow3.SampleLevel(__smpsShadow3_s, r8.zw, 0).x;
        r7.xyzw = saturate(r7.zyxy);
        r7.xyzw = r7.xyzw * r4.xyxy + r4.zwzw;
        r10.y = sShadow3.SampleLevel(__smpsShadow3_s, r7.xy, 0).x;
        r10.z = sShadow3.SampleLevel(__smpsShadow3_s, r7.zw, 0).x;
        r7.xyzw = cmp(r10.xyzw < r3.xxxx);
        r8.xyzw = r7.xyzw ? float4(1,1,1,1) : 0;
        r7.xy = r7.xy ? float2(-1,-1) : float2(-0,-0);
        r7.xy = r8.wz + r7.xy;
        r7.xy = r6.zz * r7.xy + r8.xy;
        r6.z = r7.y + -r7.x;
        r6.z = r6.w * r6.z + r7.x;
        r0.w = r6.z + r0.w;
        r6.zw = r9.xy * r5.zw + float2(-0.5,-0.5);
        r6.zw = frac(r6.zw);
        r7.zw = -r6.zw * r5.xy + r9.xy;
        r7.xy = r7.zw + r5.xy;
        r8.xyzw = saturate(r7.zwxw);
        r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
        r9.x = sShadow3.SampleLevel(__smpsShadow3_s, r8.xy, 0).x;
        r9.w = sShadow3.SampleLevel(__smpsShadow3_s, r8.zw, 0).x;
        r7.xyzw = saturate(r7.zyxy);
        r7.xyzw = r7.xyzw * r4.xyxy + r4.zwzw;
        r9.y = sShadow3.SampleLevel(__smpsShadow3_s, r7.xy, 0).x;
        r9.z = sShadow3.SampleLevel(__smpsShadow3_s, r7.zw, 0).x;
        r7.xyzw = cmp(r9.xyzw < r3.xxxx);
        r8.xyzw = r7.xyzw ? float4(1,1,1,1) : 0;
        r7.xy = r7.xy ? float2(-1,-1) : float2(-0,-0);
        r7.xy = r8.wz + r7.xy;
        r7.xy = r6.zz * r7.xy + r8.xy;
        r6.z = r7.y + -r7.x;
        r6.z = r6.w * r6.z + r7.x;
        r0.w = r6.z + r0.w;
        r3.w = 0.0625 * r0.w;
      } else {
        r6.xw = r6.xy + r3.yz;
        r3.x = saturate(r3.x);
        r3.yz = r6.xw * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r7.zw = -r3.yz * r5.xy + r6.xw;
        r7.xy = r7.zw + r5.xy;
        r8.xyzw = saturate(r7.zwxw);
        r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
        r9.x = sShadow4.SampleLevel(__smpsShadow4_s, r8.xy, 0).x;
        r9.w = sShadow4.SampleLevel(__smpsShadow4_s, r8.zw, 0).x;
        r7.xyzw = saturate(r7.zyxy);
        r7.xyzw = r7.xyzw * r4.xyxy + r4.zwzw;
        r9.y = sShadow4.SampleLevel(__smpsShadow4_s, r7.xy, 0).x;
        r9.z = sShadow4.SampleLevel(__smpsShadow4_s, r7.zw, 0).x;
        r7.xyzw = cmp(r9.xyzw < r3.xxxx);
        r8.xyzw = r7.xyzw ? float4(1,1,1,1) : 0;
        r7.xy = r7.xy ? float2(-1,-1) : float2(-0,-0);
        r7.xy = r8.wz + r7.xy;
        r7.xy = r3.yy * r7.xy + r8.xy;
        r0.w = r7.y + -r7.x;
        r0.w = r3.z * r0.w + r7.x;
        r6.yz = r6.wx + r5.yx;
        r3.yz = r6.zw * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r7.zw = -r3.yz * r5.xy + r6.zw;
        r7.xy = r7.zw + r5.xy;
        r8.xyzw = saturate(r7.zwxw);
        r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
        r9.x = sShadow4.SampleLevel(__smpsShadow4_s, r8.xy, 0).x;
        r9.w = sShadow4.SampleLevel(__smpsShadow4_s, r8.zw, 0).x;
        r7.xyzw = saturate(r7.zyxy);
        r7.xyzw = r7.xyzw * r4.xyxy + r4.zwzw;
        r9.y = sShadow4.SampleLevel(__smpsShadow4_s, r7.xy, 0).x;
        r9.z = sShadow4.SampleLevel(__smpsShadow4_s, r7.zw, 0).x;
        r7.xyzw = cmp(r9.xyzw < r3.xxxx);
        r8.xyzw = r7.xyzw ? float4(1,1,1,1) : 0;
        r7.xy = r7.xy ? float2(-1,-1) : float2(-0,-0);
        r7.xy = r8.wz + r7.xy;
        r7.xy = r3.yy * r7.xy + r8.xy;
        r3.y = r7.y + -r7.x;
        r3.y = r3.z * r3.y + r7.x;
        r0.w = r3.y + r0.w;
        r7.xw = r6.yz + r5.yx;
        r7.yz = r6.wy;
        r3.yz = r7.wy * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r8.zw = -r3.yz * r5.xy + r7.wy;
        r8.xy = r8.zw + r5.xy;
        r9.xyzw = saturate(r8.zwxw);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r10.x = sShadow4.SampleLevel(__smpsShadow4_s, r9.xy, 0).x;
        r10.w = sShadow4.SampleLevel(__smpsShadow4_s, r9.zw, 0).x;
        r8.xyzw = saturate(r8.zyxy);
        r8.xyzw = r8.xyzw * r4.xyxy + r4.zwzw;
        r10.y = sShadow4.SampleLevel(__smpsShadow4_s, r8.xy, 0).x;
        r10.z = sShadow4.SampleLevel(__smpsShadow4_s, r8.zw, 0).x;
        r8.xyzw = cmp(r10.xyzw < r3.xxxx);
        r9.xyzw = r8.xyzw ? float4(1,1,1,1) : 0;
        r8.xy = r8.xy ? float2(-1,-1) : float2(-0,-0);
        r8.xy = r9.wz + r8.xy;
        r8.xy = r3.yy * r8.xy + r9.xy;
        r3.y = r8.y + -r8.x;
        r3.y = r3.z * r3.y + r8.x;
        r0.w = r3.y + r0.w;
        r8.xy = r7.wx + r5.xy;
        r8.zw = r7.yz;
        r3.yz = r8.xz * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r9.zw = -r3.yz * r5.xy + r8.xz;
        r9.xy = r9.zw + r5.xy;
        r10.xyzw = saturate(r9.zwxw);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r11.x = sShadow4.SampleLevel(__smpsShadow4_s, r10.xy, 0).x;
        r11.w = sShadow4.SampleLevel(__smpsShadow4_s, r10.zw, 0).x;
        r9.xyzw = saturate(r9.zyxy);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r11.y = sShadow4.SampleLevel(__smpsShadow4_s, r9.xy, 0).x;
        r11.z = sShadow4.SampleLevel(__smpsShadow4_s, r9.zw, 0).x;
        r9.xyzw = cmp(r11.xyzw < r3.xxxx);
        r10.xyzw = r9.xyzw ? float4(1,1,1,1) : 0;
        r9.xy = r9.xy ? float2(-1,-1) : float2(-0,-0);
        r9.xy = r10.wz + r9.xy;
        r9.xy = r3.yy * r9.xy + r10.xy;
        r3.y = r9.y + -r9.x;
        r3.y = r3.z * r3.y + r9.x;
        r0.w = r3.y + r0.w;
        r3.yz = r6.xy * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r9.zw = -r3.yz * r5.xy + r6.xy;
        r9.xy = r9.zw + r5.xy;
        r10.xyzw = saturate(r9.zwxw);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r11.x = sShadow4.SampleLevel(__smpsShadow4_s, r10.xy, 0).x;
        r11.w = sShadow4.SampleLevel(__smpsShadow4_s, r10.zw, 0).x;
        r9.xyzw = saturate(r9.zyxy);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r11.y = sShadow4.SampleLevel(__smpsShadow4_s, r9.xy, 0).x;
        r11.z = sShadow4.SampleLevel(__smpsShadow4_s, r9.zw, 0).x;
        r9.xyzw = cmp(r11.xyzw < r3.xxxx);
        r10.xyzw = r9.xyzw ? float4(1,1,1,1) : 0;
        r9.xy = r9.xy ? float2(-1,-1) : float2(-0,-0);
        r9.xy = r10.wz + r9.xy;
        r9.xy = r3.yy * r9.xy + r10.xy;
        r3.y = r9.y + -r9.x;
        r3.y = r3.z * r3.y + r9.x;
        r0.w = r3.y + r0.w;
        r3.yz = r6.zy * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r9.zw = -r3.yz * r5.xy + r6.zy;
        r9.xy = r9.zw + r5.xy;
        r10.xyzw = saturate(r9.zwxw);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r11.x = sShadow4.SampleLevel(__smpsShadow4_s, r10.xy, 0).x;
        r11.w = sShadow4.SampleLevel(__smpsShadow4_s, r10.zw, 0).x;
        r9.xyzw = saturate(r9.zyxy);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r11.y = sShadow4.SampleLevel(__smpsShadow4_s, r9.xy, 0).x;
        r11.z = sShadow4.SampleLevel(__smpsShadow4_s, r9.zw, 0).x;
        r9.xyzw = cmp(r11.xyzw < r3.xxxx);
        r10.xyzw = r9.xyzw ? float4(1,1,1,1) : 0;
        r9.xy = r9.xy ? float2(-1,-1) : float2(-0,-0);
        r9.xy = r10.wz + r9.xy;
        r9.xy = r3.yy * r9.xy + r10.xy;
        r3.y = r9.y + -r9.x;
        r3.y = r3.z * r3.y + r9.x;
        r0.w = r3.y + r0.w;
        r3.yz = r7.wz * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r9.zw = -r3.yz * r5.xy + r7.wz;
        r9.xy = r9.zw + r5.xy;
        r10.xyzw = saturate(r9.zwxw);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r11.x = sShadow4.SampleLevel(__smpsShadow4_s, r10.xy, 0).x;
        r11.w = sShadow4.SampleLevel(__smpsShadow4_s, r10.zw, 0).x;
        r9.xyzw = saturate(r9.zyxy);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r11.y = sShadow4.SampleLevel(__smpsShadow4_s, r9.xy, 0).x;
        r11.z = sShadow4.SampleLevel(__smpsShadow4_s, r9.zw, 0).x;
        r9.xyzw = cmp(r11.xyzw < r3.xxxx);
        r10.xyzw = r9.xyzw ? float4(1,1,1,1) : 0;
        r9.xy = r9.xy ? float2(-1,-1) : float2(-0,-0);
        r9.xy = r10.wz + r9.xy;
        r9.xy = r3.yy * r9.xy + r10.xy;
        r3.y = r9.y + -r9.x;
        r3.y = r3.z * r3.y + r9.x;
        r0.w = r3.y + r0.w;
        r3.yz = r8.xw * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r9.zw = -r3.yz * r5.xy + r8.xw;
        r9.xy = r9.zw + r5.xy;
        r10.xyzw = saturate(r9.zwxw);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r11.x = sShadow4.SampleLevel(__smpsShadow4_s, r10.xy, 0).x;
        r11.w = sShadow4.SampleLevel(__smpsShadow4_s, r10.zw, 0).x;
        r9.xyzw = saturate(r9.zyxy);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r11.y = sShadow4.SampleLevel(__smpsShadow4_s, r9.xy, 0).x;
        r11.z = sShadow4.SampleLevel(__smpsShadow4_s, r9.zw, 0).x;
        r9.xyzw = cmp(r11.xyzw < r3.xxxx);
        r10.xyzw = r9.xyzw ? float4(1,1,1,1) : 0;
        r8.zw = r9.xy ? float2(-1,-1) : float2(-0,-0);
        r8.zw = r10.wz + r8.zw;
        r8.zw = r3.yy * r8.zw + r10.xy;
        r3.y = r8.w + -r8.z;
        r3.y = r3.z * r3.y + r8.z;
        r0.w = r3.y + r0.w;
        r6.y = r7.x;
        r3.yz = r6.xy * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r9.zw = -r3.yz * r5.xy + r6.xy;
        r9.xy = r9.zw + r5.xy;
        r10.xyzw = saturate(r9.zwxw);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r11.x = sShadow4.SampleLevel(__smpsShadow4_s, r10.xy, 0).x;
        r11.w = sShadow4.SampleLevel(__smpsShadow4_s, r10.zw, 0).x;
        r9.xyzw = saturate(r9.zyxy);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r11.y = sShadow4.SampleLevel(__smpsShadow4_s, r9.xy, 0).x;
        r11.z = sShadow4.SampleLevel(__smpsShadow4_s, r9.zw, 0).x;
        r9.xyzw = cmp(r11.xyzw < r3.xxxx);
        r10.xyzw = r9.xyzw ? float4(1,1,1,1) : 0;
        r8.zw = r9.xy ? float2(-1,-1) : float2(-0,-0);
        r8.zw = r10.wz + r8.zw;
        r8.zw = r3.yy * r8.zw + r10.xy;
        r3.y = r8.w + -r8.z;
        r3.y = r3.z * r3.y + r8.z;
        r0.w = r3.y + r0.w;
        r3.yz = r6.zy * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r9.zw = -r3.yz * r5.xy + r6.zy;
        r9.xy = r9.zw + r5.xy;
        r10.xyzw = saturate(r9.zwxw);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r11.x = sShadow4.SampleLevel(__smpsShadow4_s, r10.xy, 0).x;
        r11.w = sShadow4.SampleLevel(__smpsShadow4_s, r10.zw, 0).x;
        r9.xyzw = saturate(r9.zyxy);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r11.y = sShadow4.SampleLevel(__smpsShadow4_s, r9.xy, 0).x;
        r11.z = sShadow4.SampleLevel(__smpsShadow4_s, r9.zw, 0).x;
        r9.xyzw = cmp(r11.xyzw < r3.xxxx);
        r10.xyzw = r9.xyzw ? float4(1,1,1,1) : 0;
        r8.zw = r9.xy ? float2(-1,-1) : float2(-0,-0);
        r8.zw = r10.wz + r8.zw;
        r8.zw = r3.yy * r8.zw + r10.xy;
        r3.y = r8.w + -r8.z;
        r3.y = r3.z * r3.y + r8.z;
        r0.w = r3.y + r0.w;
        r3.yz = r7.wx * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r9.zw = -r3.yz * r5.xy + r7.wx;
        r9.xy = r9.zw + r5.xy;
        r10.xyzw = saturate(r9.zwxw);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r11.x = sShadow4.SampleLevel(__smpsShadow4_s, r10.xy, 0).x;
        r11.w = sShadow4.SampleLevel(__smpsShadow4_s, r10.zw, 0).x;
        r9.xyzw = saturate(r9.zyxy);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r11.y = sShadow4.SampleLevel(__smpsShadow4_s, r9.xy, 0).x;
        r11.z = sShadow4.SampleLevel(__smpsShadow4_s, r9.zw, 0).x;
        r9.xyzw = cmp(r11.xyzw < r3.xxxx);
        r10.xyzw = r9.xyzw ? float4(1,1,1,1) : 0;
        r8.zw = r9.xy ? float2(-1,-1) : float2(-0,-0);
        r8.zw = r10.wz + r8.zw;
        r8.zw = r3.yy * r8.zw + r10.xy;
        r3.y = r8.w + -r8.z;
        r3.y = r3.z * r3.y + r8.z;
        r0.w = r3.y + r0.w;
        r6.w = r8.x;
        r3.yz = r6.wy * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r9.zw = -r3.yz * r5.xy + r6.wy;
        r9.xy = r9.zw + r5.xy;
        r10.xyzw = saturate(r9.zwxw);
        r10.xyzw = r10.xyzw * r4.xyxy + r4.zwzw;
        r11.x = sShadow4.SampleLevel(__smpsShadow4_s, r10.xy, 0).x;
        r11.w = sShadow4.SampleLevel(__smpsShadow4_s, r10.zw, 0).x;
        r9.xyzw = saturate(r9.zyxy);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r11.y = sShadow4.SampleLevel(__smpsShadow4_s, r9.xy, 0).x;
        r11.z = sShadow4.SampleLevel(__smpsShadow4_s, r9.zw, 0).x;
        r9.xyzw = cmp(r11.xyzw < r3.xxxx);
        r10.xyzw = r9.xyzw ? float4(1,1,1,1) : 0;
        r6.yw = r9.xy ? float2(-1,-1) : float2(-0,-0);
        r6.yw = r10.wz + r6.yw;
        r6.yw = r3.yy * r6.yw + r10.xy;
        r3.y = r6.w + -r6.y;
        r3.y = r3.z * r3.y + r6.y;
        r0.w = r3.y + r0.w;
        r7.xz = r6.xz;
        r7.y = r8.y;
        r3.yz = r7.xy * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r6.zw = -r3.yz * r5.xy + r7.xy;
        r6.xy = r6.zw + r5.xy;
        r9.xyzw = saturate(r6.zwxw);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r10.x = sShadow4.SampleLevel(__smpsShadow4_s, r9.xy, 0).x;
        r10.w = sShadow4.SampleLevel(__smpsShadow4_s, r9.zw, 0).x;
        r6.xyzw = saturate(r6.zyxy);
        r6.xyzw = r6.xyzw * r4.xyxy + r4.zwzw;
        r10.y = sShadow4.SampleLevel(__smpsShadow4_s, r6.xy, 0).x;
        r10.z = sShadow4.SampleLevel(__smpsShadow4_s, r6.zw, 0).x;
        r6.xyzw = cmp(r10.xyzw < r3.xxxx);
        r9.xyzw = r6.xyzw ? float4(1,1,1,1) : 0;
        r6.xy = r6.xy ? float2(-1,-1) : float2(-0,-0);
        r6.xy = r9.wz + r6.xy;
        r6.xy = r3.yy * r6.xy + r9.xy;
        r3.y = r6.y + -r6.x;
        r3.y = r3.z * r3.y + r6.x;
        r0.w = r3.y + r0.w;
        r3.yz = r7.zy * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r6.zw = -r3.yz * r5.xy + r7.zy;
        r6.xy = r6.zw + r5.xy;
        r9.xyzw = saturate(r6.zwxw);
        r9.xyzw = r9.xyzw * r4.xyxy + r4.zwzw;
        r10.x = sShadow4.SampleLevel(__smpsShadow4_s, r9.xy, 0).x;
        r10.w = sShadow4.SampleLevel(__smpsShadow4_s, r9.zw, 0).x;
        r6.xyzw = saturate(r6.zyxy);
        r6.xyzw = r6.xyzw * r4.xyxy + r4.zwzw;
        r10.y = sShadow4.SampleLevel(__smpsShadow4_s, r6.xy, 0).x;
        r10.z = sShadow4.SampleLevel(__smpsShadow4_s, r6.zw, 0).x;
        r6.xyzw = cmp(r10.xyzw < r3.xxxx);
        r9.xyzw = r6.xyzw ? float4(1,1,1,1) : 0;
        r6.xy = r6.xy ? float2(-1,-1) : float2(-0,-0);
        r6.xy = r9.wz + r6.xy;
        r6.xy = r3.yy * r6.xy + r9.xy;
        r3.y = r6.y + -r6.x;
        r3.y = r3.z * r3.y + r6.x;
        r0.w = r3.y + r0.w;
        r3.yz = r7.wy * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r6.zw = -r3.yz * r5.xy + r7.wy;
        r6.xy = r6.zw + r5.xy;
        r7.xyzw = saturate(r6.zwxw);
        r7.xyzw = r7.xyzw * r4.xyxy + r4.zwzw;
        r9.x = sShadow4.SampleLevel(__smpsShadow4_s, r7.xy, 0).x;
        r9.w = sShadow4.SampleLevel(__smpsShadow4_s, r7.zw, 0).x;
        r6.xyzw = saturate(r6.zyxy);
        r6.xyzw = r6.xyzw * r4.xyxy + r4.zwzw;
        r9.y = sShadow4.SampleLevel(__smpsShadow4_s, r6.xy, 0).x;
        r9.z = sShadow4.SampleLevel(__smpsShadow4_s, r6.zw, 0).x;
        r6.xyzw = cmp(r9.xyzw < r3.xxxx);
        r7.xyzw = r6.xyzw ? float4(1,1,1,1) : 0;
        r6.xy = r6.xy ? float2(-1,-1) : float2(-0,-0);
        r6.xy = r7.wz + r6.xy;
        r6.xy = r3.yy * r6.xy + r7.xy;
        r3.y = r6.y + -r6.x;
        r3.y = r3.z * r3.y + r6.x;
        r0.w = r3.y + r0.w;
        r3.yz = r8.xy * r5.zw + float2(-0.5,-0.5);
        r3.yz = frac(r3.yz);
        r6.zw = -r3.yz * r5.xy + r8.xy;
        r6.xy = r6.zw + r5.xy;
        r5.xyzw = saturate(r6.zwxw);
        r5.xyzw = r5.xyzw * r4.xyxy + r4.zwzw;
        r7.x = sShadow4.SampleLevel(__smpsShadow4_s, r5.xy, 0).x;
        r7.w = sShadow4.SampleLevel(__smpsShadow4_s, r5.zw, 0).x;
        r5.xyzw = saturate(r6.zyxy);
        r4.xyzw = r5.xyzw * r4.xyxy + r4.zwzw;
        r7.y = sShadow4.SampleLevel(__smpsShadow4_s, r4.xy, 0).x;
        r7.z = sShadow4.SampleLevel(__smpsShadow4_s, r4.zw, 0).x;
        r4.xyzw = cmp(r7.xyzw < r3.xxxx);
        r5.xyzw = r4.xyzw ? float4(1,1,1,1) : 0;
        r4.xy = r4.xy ? float2(-1,-1) : float2(-0,-0);
        r4.xy = r5.wz + r4.xy;
        r3.xy = r3.yy * r4.xy + r5.xy;
        r3.y = r3.y + -r3.x;
        r3.x = r3.z * r3.y + r3.x;
        r0.w = r3.x + r0.w;
        r3.w = 0.0625 * r0.w;
      }
    }
  }
  r0.w = saturate(dot(sdplane.xyzw, r2.xyzw));
  o0.w = -r3.w * r0.w + 1;
  r2.xyz = mTrsW2LPV[0]._m10_m11_m12 * r1.yyy;
  r2.xyz = r1.xxx * mTrsW2LPV[0]._m00_m01_m02 + r2.xyz;
  r2.xyz = r1.zzz * mTrsW2LPV[0]._m20_m21_m22 + r2.xyz;
  r2.xyz = r1.www * mTrsW2LPV[0]._m30_m31_m32 + r2.xyz;
  r3.xyz = mTrsW2LPVSR[0]._m10_m11_m12 * r1.yyy;
  r3.xyz = r1.xxx * mTrsW2LPVSR[0]._m00_m01_m02 + r3.xyz;
  r1.xyz = r1.zzz * mTrsW2LPVSR[0]._m20_m21_m22 + r3.xyz;
  r1.xyz = r1.www * mTrsW2LPVSR[0]._m30_m31_m32 + r1.xyz;
  r0.w = cmp(fSHBlendRegion.x == 0.000000);
  r3.xyz = float3(-0.5,-0.5,-0.5) + r1.xyz;
  r1.w = max(abs(r3.y), abs(r3.z));
  r1.w = max(abs(r3.x), r1.w);
  r1.w = cmp(0.5 < r1.w);
  r1.w = r1.w ? 0 : 1;
  r4.xyz = min(fSHBlendRegion.xxx, r1.xyz);
  r1.xyz = float3(1,1,1) + -r1.xyz;
  r1.xyz = min(fSHBlendRegion.xxx, r1.xyz);
  r1.xyz = min(r4.xyz, r1.xyz);
  r1.y = min(r1.y, r1.z);
  r1.x = min(r1.x, r1.y);
  r1.x = saturate(r1.x / fSHBlendRegion.x);
  r0.w = r0.w ? r1.w : r1.x;
  r1.x = cmp(r0.w != 0.000000);
  r1.y = nLPV3DDepth;
  r1.z = r2.z * r1.y;
  r2.w = floor(r1.z);
  r1.z = (int)r2.w;
  r1.z = (int)r1.z + 1;
  r1.w = nLPV3DDepth + -1;
  r1.z = min((int)r1.z, (int)r1.w);
  r4.x = (int)r1.z;
  r5.xyzw = sLPVBuffer.Sample(__smpsLPVBuffer_s, r2.xyw).xyzw;
  r4.yz = r2.xy;
  r6.xyzw = sLPVBuffer.Sample(__smpsLPVBuffer_s, r4.yzx).xyzw;
  r4.w = r2.w + r1.y;
  r7.zw = r4.xw + r1.yy;
  r8.xyzw = sLPVBuffer.Sample(__smpsLPVBuffer_s, r4.yzw).xyzw;
  r7.xy = r4.yz;
  r4.xyzw = sLPVBuffer.Sample(__smpsLPVBuffer_s, r7.xyz).xyzw;
  r7.z = r7.z + r1.y;
  r9.xyzw = sLPVBuffer.Sample(__smpsLPVBuffer_s, r7.xyw).xyzw;
  r7.xyzw = sLPVBuffer.Sample(__smpsLPVBuffer_s, r7.xyz).xyzw;
  if (r1.x != 0) {
    r1.xzw = fNormalDir * r0.yzx;
    r10.yzw = float3(-1.02332747,1.02332747,-1.02332747) * r1.xzw;
    r1.x = r2.z * r1.y + -r2.w;
    r1.y = 1 + -r1.x;
    r2.xyzw = r1.xxxx * r6.xyzw;
    r2.xyzw = r1.yyyy * r5.xyzw + r2.xyzw;
    r4.xyzw = r1.xxxx * r4.xyzw;
    r4.xyzw = r1.yyyy * r8.xyzw + r4.xyzw;
    r5.xyzw = r1.xxxx * r7.xyzw;
    r1.xyzw = r1.yyyy * r9.xyzw + r5.xyzw;
    r10.x = 0.886227369;
    r2.x = dot(r2.xyzw, r10.xyzw);
    r2.x = max(0, r2.x);
    r2.w = dot(r4.xyzw, r10.xyzw);
    r2.w = max(0, r2.w);
    r2.xy = r2.xw * r0.ww;
    r1.x = dot(r1.xyzw, r10.xyzw);
    r1.x = max(0, r1.x);
    r2.z = r1.x * r0.w;
  } else {
    r2.xyz = float3(0,0,0);
  }
  r1.xyz = fDiffuseScale * r2.xyz;
  r0.xyz = sAmbDif.Sample(__smpsAmbDif_s, r0.xyz).xyz;
  r0.xyz = vAmbParam.xxx * r0.xyz;
  r4.xyz = vAmbDifScl.xyz * r0.xyz;
  r2.xyz = r2.xyz * fDiffuseScale + r4.xyz;
  r0.w = dot(r3.xyz, r3.xyz);
  r0.w = sqrt(r0.w);
  r0.w = saturate(vAmdLerpParam.x * r0.w + -vAmdLerpParam.y);
  r0.xyz = r0.xyz * vAmbDifScl.xyz + -r1.xyz;
  r0.xyz = r0.www * r0.xyz + r1.xyz;
  r3.xyz = cmp(vAmdLerpParam.zzz < float3(0,1,2));
  r4.xyz = r4.xyz * r0.www + r1.xyz;
  r1.xyz = r3.zzz ? r4.xyz : r1.xyz;
  r0.xyz = r3.yyy ? r0.xyz : r1.xyz;
  r0.xyz = r3.xxx ? r2.xyz : r0.xyz;
  o0.xyz = ambLit.xyz + r0.xyz;
  return;
}